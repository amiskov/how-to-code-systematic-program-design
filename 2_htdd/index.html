<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2: How to Design Data | How to Code</title>
    <meta name="description" content="">
    <link rel="icon" href="/mooc_htdp/favicon.ico">
    
    <link rel="preload" href="/mooc_htdp/assets/css/0.styles.18489455.css" as="style"><link rel="preload" href="/mooc_htdp/assets/js/app.592f2e84.js" as="script"><link rel="preload" href="/mooc_htdp/assets/js/2.c3a79ebd.js" as="script"><link rel="prefetch" href="/mooc_htdp/assets/js/3.995fccf7.js"><link rel="prefetch" href="/mooc_htdp/assets/js/4.30812adf.js"><link rel="prefetch" href="/mooc_htdp/assets/js/5.04b7ebe3.js"><link rel="prefetch" href="/mooc_htdp/assets/js/6.1399ec09.js"><link rel="prefetch" href="/mooc_htdp/assets/js/7.bde6f355.js"><link rel="prefetch" href="/mooc_htdp/assets/js/8.73ede66b.js"><link rel="prefetch" href="/mooc_htdp/assets/js/9.35d4c287.js">
    <link rel="stylesheet" href="/mooc_htdp/assets/css/0.styles.18489455.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mooc_htdp/" class="home-link router-link-active"><!----> <span class="site-name">How to Code</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/mooc_htdp/" class="sidebar-link">How to Code</a></li><li><a href="/mooc_htdp/00_introduction.html" class="sidebar-link">Welcome</a></li><li><a href="/mooc_htdp/1a_bsl/" class="sidebar-link">1a: Beginning Student Language</a></li><li><a href="/mooc_htdp/1b_htdf/" class="sidebar-link">1b: How to Design Functions</a></li><li><a href="/mooc_htdp/2_htdd/" class="active sidebar-link">2: How to Design Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#module-overview" class="sidebar-link">Module Overview</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#cond-expressions" class="sidebar-link">cond Expressions</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#data-definitions" class="sidebar-link">Data Definitions</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#atomic-non-distinct" class="sidebar-link">Atomic Non-Distinct</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#htdf-with-non-primitive-data" class="sidebar-link">HtDF With Non-Primitive Data</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#htdf-x-structure-of-data-orthogonality" class="sidebar-link">HtDF X Structure of Data Orthogonality</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#interval" class="sidebar-link">Interval</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#enumeration" class="sidebar-link">Enumeration</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#itemization" class="sidebar-link">Itemization</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#htdf-with-interval" class="sidebar-link">HtDF with Interval</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#htdf-with-enumeration" class="sidebar-link">HtDF with Enumeration</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#htdf-with-itemization" class="sidebar-link">HtDF with Itemization</a></li><li class="sidebar-sub-header"><a href="/mooc_htdp/2_htdd/#structure-of-information-flows-through" class="sidebar-link">Structure of Information Flows Through</a></li></ul></li><li><a href="/mooc_htdp/3_htdw/" class="sidebar-link">3a: How to Design Worlds</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="_2-how-to-design-data"><a href="#_2-how-to-design-data" aria-hidden="true" class="header-anchor">#</a> 2: How to Design Data</h1> <h2 id="module-overview"><a href="#module-overview" aria-hidden="true" class="header-anchor">#</a> Module Overview</h2> <p>Процесс проектирования данных в программе рулит процессом проектирования функций. Хотя функций может быть больше, все они завязаны на те данные, с которыми они работают. <strong>Данные управляют работой функций</strong>. В процессе проектирования данных мы влияем на функции, которые будут этими данными пользоваться.</p> <blockquote><p>And what we're going to see is that the design of data really turns out to be a <strong>point of leverage</strong> (точка опоры) in designing programs.</p></blockquote> <p>Learning Goals:</p> <ul><li>Be able to use the How to Design Data Definitions (HtDD) recipe to design data definitions for atomic data.</li> <li>Be able to identify problem domain information that should be represented as simple atomic data, intervals, enumerations, itemizations and mixed data itemizations.</li> <li>Be able to use the Data Driven Templates recipe to generate templates for functions operating on atomic data.</li> <li>Be able to use the How to Design Functions (HtDF) recipe to design functions operating on atomic data.</li></ul> <h2 id="cond-expressions"><a href="#cond-expressions" aria-hidden="true" class="header-anchor">#</a> <code>cond</code> Expressions</h2> <p><code>cond</code> упрощает написание условий, когда исходов больше, чем 2 (<code>if</code> обрабатывает только два) и эти <em>исходы равнозначны</em>.</p> <blockquote><p><code>cond</code> — multi-armed conditional.</p></blockquote> <p>Синтаксис:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">cond</span> [Q A]
      [Q A]
      [Q A]
      <span class="token comment">; ...</span>
      [else A]<span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">Стиль кода</p> <p>В Лиспе скобочки <code>()</code> и <code>[]</code> эквивалентны, но по соглашению в <code>cond</code> используют квадратные.</p></div> <p><code>Q</code>uestion и <code>A</code>nswer — выражения. Вопросы <code>Q</code> должны быть предикатами (возвращать <code>Boolean</code>). В конце можно использовать <code>else</code>, чтобы обозначить ответ для всех прочих случаев.</p> <p>Пример вычисления значения по модулю:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">absval</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token operator">&gt;</span> n <span class="token number">0</span><span class="token punctuation">)</span> n]
        [<span class="token punctuation">(</span><span class="token operator">&lt;</span> n <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">-1</span> n<span class="token punctuation">)</span>]
        [else <span class="token number">0</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Пример дизайна функции с <code>cond</code>. Аннотации по HTDF-рецепту позволяют быстрее понять код:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token function">require</span> 2htdp/image<span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> I1 <span class="token punctuation">(</span><span class="token function">rectangle</span> <span class="token number">10</span> <span class="token number">20</span> <span class="token string">&quot;solid&quot;</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> I2 <span class="token punctuation">(</span><span class="token function">rectangle</span> <span class="token number">20</span> <span class="token number">20</span> <span class="token string">&quot;solid&quot;</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> I3 <span class="token punctuation">(</span><span class="token function">rectangle</span> <span class="token number">20</span> <span class="token number">10</span> <span class="token string">&quot;solid&quot;</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">;; Image -&gt; String</span>
<span class="token comment">;; produce shape of image, one of &quot;tall&quot;, &quot;square&quot; or &quot;wide&quot;</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aspect-ratio</span> I1<span class="token punctuation">)</span> <span class="token string">&quot;tall&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aspect-ratio</span> I2<span class="token punctuation">)</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aspect-ratio</span> I3<span class="token punctuation">)</span> <span class="token string">&quot;wide&quot;</span><span class="token punctuation">)</span>

<span class="token comment">;(define (aspect-ratio img) &quot;&quot;)  ;stub</span>

<span class="token comment">;(define (aspect-ratio img)      ;template</span>
<span class="token comment">;  (... img))</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">aspect-ratio</span> img<span class="token punctuation">)</span>  
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token function">image-height</span> img<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">image-width</span> img<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string">&quot;tall&quot;</span>]
        [<span class="token punctuation">(</span><span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token function">image-height</span> img<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">image-width</span> img<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string">&quot;wide&quot;</span>]
        [else <span class="token string">&quot;square&quot;</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>С <code>if</code> эта же функция выглядела бы гораздо запутаннее:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">aspect-ratio</span> img<span class="token punctuation">)</span>  
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token function">image-height</span> img<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">image-width</span> img<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token string">&quot;tall&quot;</span>
      <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">image-height</span> img<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">image-width</span> img<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">; второе условие внутри</span>
          <span class="token string">&quot;square&quot;</span>                                 <span class="token comment">; отрицательной ветки первого</span>
          <span class="token string">&quot;wide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Код с <code>if</code>, к тому же, нелогичный. Есть три равнозначных исхода: прямоугольник может быть узкий, равносторонний (квадрат) или широкий. В примере с <code>if</code> не видно равнозначности: второе условие вложено в <code>false</code>-вариант первого. В <code>cond</code> все случаи равнозначны и код получается проще и понятнее.</p> <div class="tip custom-block"><p class="custom-block-title">Блочный комментарий в Racket</p> <p>Закоментить целый блок кода (выражение) можно, поставив на строке перед ним <code>#;</code>.</p></div> <h2 id="data-definitions"><a href="#data-definitions" aria-hidden="true" class="header-anchor">#</a> Data Definitions</h2> <p>Данные в коде программы представляет какую-то информацию из внешнего мира.</p> <p><img src="/mooc_htdp/assets/img/data_and_information.9dfa8c68.png" alt></p> <blockquote><p>Data definitions explain how information is represented as data. This is a crucial part of program design and has a significant effect on the design of every function that operates on that data.</p></blockquote> <p>Например, чтобы запрограммировать светофор, нужно как-то обозначить цвета. У нас нет лампочек в программе, но есть данные: цифры, буквы и пр. Таким образом, цвета светофора можно обозначить как <code>0</code>, <code>1</code> и <code>2</code> для красного, желтого и зеленого соответственно.</p> <p>Определение данных (data definition) описывает следующее:</p> <ul><li>как оформить данные нового типа;</li> <li>как представить информацию из внешнего мира (красный, желтый, зеленый в светофоре) в виде данных в коде программы (0, 1, 2);</li> <li>как интерпретировать данные из программы в виде информации из внешнего мира;</li> <li>шаблон для работы с данными.</li></ul> <p>Определение данных упрощает функции:</p> <ul><li>ограничивает набор данных, которые функция принимает и возвращает;</li> <li>помогает с примерами и шаблонами.</li></ul> <p><a name="tl-example"></a>Пример определения типа данных <code>TLColor</code> — число от <code>0</code> до <code>2</code>, которое представляет цвет светофора:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; Data definitions</span>

<span class="token comment">;; TLColor is one of:                      ; type comment</span>
<span class="token comment">;;  - 0</span>
<span class="token comment">;;  - 1</span>
<span class="token comment">;;  - 2</span>
<span class="token comment">;; interp. 0 means red, 1 yellow, 2 green  ; interpretation</span>
#<span class="token comment">;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fn-for-tlcolor</span> c<span class="token punctuation">)</span>                 <span class="token comment">; template for one-argument function</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]                    <span class="token comment">; that consume data of this argument</span>
        [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]
        [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">;; Functions</span>

<span class="token comment">;; TLColor -&gt; TLColor</span>
<span class="token comment">;; produce next color of traffic light</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">next-color</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">next-color</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">next-color</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">;(define (next-color c) 0)  ;stub</span>

<span class="token comment">; Template from TLColor</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">next-color</span> c<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">2</span>]         <span class="token comment">; red -&gt; green</span>
        [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span>]         <span class="token comment">; green -&gt; yellow</span>
        [<span class="token punctuation">(</span><span class="token operator">=</span> c <span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">0</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">; yellow -&gt; red</span>
</code></pre></div><p>Смоделировали такой светофор:</p> <p><img src="/mooc_htdp/assets/img/tl.7f68293e.gif" alt></p> <h2 id="atomic-non-distinct"><a href="#atomic-non-distinct" aria-hidden="true" class="header-anchor">#</a> Atomic Non-Distinct</h2> <blockquote><p>A first example of using the How to Design Data (HtDD recipe) and Data Driven Templates recipes.</p></blockquote> <p>Атомарные (примитивные, неделимые) данные — те, что не состоят из частей и принадлежат одной предметной области (problem domain). Их нелзя разделить на части и сохранить при этом смысл (нельзя взять отдельную букву из названия города, в этом нет смысла).</p> <p>Non-distinct — не четкие. То есть не ограничены каким-то набором, любые.</p> <p>Например, названия городов:</p> <table style="width: 50%"><tr><th>Information</th> <th>Data</th></tr> <tr><td>Vancouver</td> <td><code>&quot;Vancouver&quot;</code></td></tr> <tr><td>Boston</td> <td><code>&quot;Boston&quot;</code></td></tr></table> <p>Пример использование HtDD и Data Driven Template:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; CityName is String</span>
<span class="token comment">;; Interp. the name of a city</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CN1 <span class="token string">&quot;Boston&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CN2 <span class="token string">&quot;Vancouver&quot;</span><span class="token punctuation">)</span>
#<span class="token comment">;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fn-for-city-name</span> cn<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">...</span> cn<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; Template rules used:</span>
<span class="token comment">;; - atomic non-distinct: String</span>
</code></pre></div><p>Мы получили не примитивный тип данных <code>CityName</code>.</p> <h2 id="htdf-with-non-primitive-data"><a href="#htdf-with-non-primitive-data" aria-hidden="true" class="header-anchor">#</a> HtDF With Non-Primitive Data</h2> <p>Пример функции для типа <code>CityName</code>:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; CityName -&gt; Boolean</span>
<span class="token comment">;; Products true if the given city is &quot;Taganrog&quot;</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">best-city?</span> <span class="token string">&quot;Moscow&quot;</span><span class="token punctuation">)</span> false<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">best-city?</span> <span class="token string">&quot;Taganrog&quot;</span><span class="token punctuation">)</span> true<span class="token punctuation">)</span>
<span class="token comment">; (define (best-city? city) true)</span>
<span class="token comment">; took template from CityName data definition</span>
#<span class="token comment">;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">best-city?</span> city<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">...</span> city<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">best-city?</span> city<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">string=?</span> city <span class="token string">&quot;Taganrog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Функции-предикаты в Лиспах принято оканчивать знаком <code>?</code>: <code>best-city?</code>.</p> <h2 id="htdf-x-structure-of-data-orthogonality"><a href="#htdf-x-structure-of-data-orthogonality" aria-hidden="true" class="header-anchor">#</a> HtDF X Structure of Data Orthogonality</h2> <blockquote><p>Orthogonal means &quot;mostly independent&quot;.</p></blockquote> <p>Рецепт HtDF не меняется при использовании разных типов данных. Изучив проектирование функций в прошлом разделе мы уже знаем все, что нужно для использования разных данных (атомарных, составных) в функциях:</p> <p><img src="/mooc_htdp/assets/img/orthogonal.6ee57314.png" alt></p> <blockquote><p>HtDF works nearly the same way for all forms of data. This has a significant impact on how quickly we can expand our design abilities, because once we learn a new form of data we already mostly know how to design functions that operate on it.</p></blockquote> <p>В таком подходе данные отделены от функций, которые их обрабатывают (функциональный подход).</p> <h2 id="interval"><a href="#interval" aria-hidden="true" class="header-anchor">#</a> Interval</h2> <p>Интервал — числа в диапазоне от и до.</p> <p>Пример: нужно задиайнить данные — номер места (кресла) в ряду в театре. Мест в ряду может быть от 1 до 32 (это информация, которую надо представить в виде данных в программе):</p> <img src="data:image/png;base64,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" height="100"> <p>Номер кресла — интервальный тип данных (число в промежутке от 1 до 32, включая оба значения).</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; SetNum is Integer[1, 32]</span>
<span class="token comment">;; Interp. seat numbers in a row, 1 and 32 are aisle seats</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> SN1  <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">; aisle</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> SN2 <span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">; middle  </span>
<span class="token punctuation">(</span><span class="token keyword">define</span> SN3 <span class="token number">32</span><span class="token punctuation">)</span> <span class="token comment">; aisle</span>
#<span class="token comment">;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fn-for-seat-num</span> sn<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">...</span> sn<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; Template rules used:</span>
<span class="token comment">;;  - atomic non-distinct: Number[1, 32]</span>
</code></pre></div><p><code>Natural</code> — натуральное число. Это <code>Integer</code> от нуля и больше (положительное число).</p> <ul><li><code>[]</code> — включая.</li> <li><code>()</code> — не включая</li></ul> <p>Например, в интервале <code>[1, 32]</code> 1 и 32 включаются, а в интервале <code>[1, 33)</code> — 1 включается, 33 — нет.</p> <p>Нужен хотя бы один пример объявления данных. Если есть несколько интересных, например, места у прохода (aisle), то их тоже стоит добавить. Чем сложнее будет структура данных, тем нужнее и важнее будут примеры.</p> <h2 id="enumeration"><a href="#enumeration" aria-hidden="true" class="header-anchor">#</a> Enumeration</h2> <p>Enumeration (перечисление) — тип данных, состоящий из фиксированного набора значений, отличных друг-от-друга. Значений должно быть два или более. Они четко определены и не меняются (one of). Например, буквенная оценка успеваемости: A, B, C. Или цвета светофора из <a href="#tl-example">примера выше</a>: красный, желтый, зеленый.</p> <p>Enumeration используются, когда предметная область состоит из четко определенного набора значений. Времена года, цвета светофора, месяцы в году и т.д.</p> <p>В перечислении данные могут быть Atomic Distinct — неделимые, четко определенные (из какого-то набора значений). Значения из набора — подклассы (subclasses) данных. Например, одно из A, B или C:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; LetterGrade is one of:</span>
<span class="token comment">;;  - &quot;A&quot;</span>
<span class="token comment">;;  - &quot;B&quot;</span>
<span class="token comment">;;  - &quot;C&quot;</span>
<span class="token comment">;; Interp. the letter grade in a course</span>
<span class="token comment">;; &lt;examples are redundant for enumerations&gt;</span>
#<span class="token comment">; </span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fn-for-letter-grade</span> lg<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]
        [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]
        [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; Template rules used:</span>
<span class="token comment">;;  - one of: 3 cases</span>
<span class="token comment">;;  - atomic distinct value: &quot;A&quot;</span>
<span class="token comment">;;  - atomic distinct value: &quot;B&quot;</span>
<span class="token comment">;;  - atomic distinct value: &quot;C&quot;</span>
</code></pre></div><p>Примеры в этом случае излишни. Потому что писать <code>зима means &quot;зима&quot;</code> или <code>red means &quot;red&quot;</code> излишне.</p> <h2 id="itemization"><a href="#itemization" aria-hidden="true" class="header-anchor">#</a> Itemization</h2> <p>Не все перечисления содержат однотипные, неделимые (atomic distinct) значения. Иногда тип данных может содержать элементы различного рода. Для таких типов данных используется Itemization.</p> <p>Например:</p> <blockquote><p>Consider designing the system for controlling a New Year's Eve
display. Design a data definition to represent the current state
of the countdown, which falls into one of three categories:</p> <ul><li>not yet started</li> <li>from 10 to 1 seconds before midnight</li> <li>complete (Happy New Year!)</li></ul></blockquote> <p>Itemization используют, когда предметная область включает 2 или более подкласса и как минимум один из них не является неделимым, отличным значением:</p> <blockquote><p>Two or more subclasses, and at least one is not atomic distinct.</p></blockquote> <p>Т.к. данные могут быть разных типов (булево, интервал, строка), то при выполнении операций нужно учитывать разные типы. Например, не допускать сравнение для строк, только для цифр и т.п.</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; CountDown is one of:</span>
<span class="token comment">;;  - false</span>
<span class="token comment">;;  - Natural[1, 10]</span>
<span class="token comment">;;  - &quot;complete&quot;</span>
<span class="token comment">;; Interp.</span>
<span class="token comment">;;     false means countdown has not yet started</span>
<span class="token comment">;;     Natural[1, 10] means countdown is running and how many seconds left</span>
<span class="token comment">;;     &quot;complete&quot; means countdown is over</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CD1 false<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CD2 <span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment">; just started</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CD3 <span class="token number">1</span><span class="token punctuation">)</span>     <span class="token comment">; almost over</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> CD4 <span class="token string">&quot;complete&quot;</span><span class="token punctuation">)</span>
#<span class="token comment">;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fn-for-countdown</span> c<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token function">false?</span> c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]
        [<span class="token punctuation">(</span><span class="token builtin">number?</span> c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">...</span> c<span class="token punctuation">)</span>]
        [else <span class="token punctuation">(</span><span class="token function">...</span><span class="token punctuation">)</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; Template rules used:</span>
<span class="token comment">;; - one of: 3 cases</span>
<span class="token comment">;; - atomic distinct: false</span>
<span class="token comment">;; - atomic non-distinct: Natural[1, 10]</span>
<span class="token comment">;; - atomic distinct: &quot;complete&quot;</span>
</code></pre></div><h3 id="упрощение-кода-itemization-pt-3"><a href="#упрощение-кода-itemization-pt-3" aria-hidden="true" class="header-anchor">#</a> Упрощение кода (Itemization, pt 3):</h3> <ol><li>Если вариант опреденного типа остался последний, то можно сделать только проверку на тип (<code>number?</code>). If a given subclass is the last subclass of its type, we can reduce the test to just the guard, ie <code>(number? c)</code>.</li> <li>Если все оставшиеся варианты одного типа, то можно опустить проверку на тип. if all reamining sublcasses are of the same type, then we can eliminate all of the guards.</li></ol> <h3 id="примеры-из-задачи"><a href="#примеры-из-задачи" aria-hidden="true" class="header-anchor">#</a> Примеры из задачи</h3> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; TV volume level 1-30, or mute</span>
<span class="token comment">;; TV volume level is one of:</span>
<span class="token comment">;;  - Natural[1, 30]</span>
<span class="token comment">;;  - &quot;mute&quot;</span>

<span class="token comment">;; height of a rocket</span>
<span class="token comment">;; RocketHeight is Natural</span>

<span class="token comment">;; primary colors: red, green, blue</span>
<span class="token comment">;; PrimaryColor is one of:</span>
<span class="token comment">;;  - &quot;red&quot;</span>
<span class="token comment">;;  - &quot;green&quot;</span>
<span class="token comment">;;  - &quot;blue&quot;</span>

<span class="token comment">;; percentage score</span>
<span class="token comment">;; PercentageScore is Number[0, 100]</span>
</code></pre></div><h2 id="htdf-with-interval"><a href="#htdf-with-interval" aria-hidden="true" class="header-anchor">#</a> HtDF with Interval</h2> <p>HtDF-рецепт <em>почти</em> не зависит от данных (mostly orthogonal). Почти, потому что описание данных дает представление о том, сколько тестов нам надо написать по рецепту для определения функций.</p> <p>Например, возьмем функцию, которая принимает номер кресла в ряду и возвращает <code>true</code>, если место с краю (aisle).</p> <p>По рецепту для создания данных для интервалов нужно <a href="https://courses.edx.org/courses/course-v1:UBCx+HtC1x+2T2017/77860a93562d40bda45e452ea064998b/#Interval" target="_blank" rel="noopener noreferrer">написать тесты<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> для граничных значений и значения откуда-то из середины.</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; SeatNum -&gt; Boolean</span>
<span class="token comment">;; produces true if the given number is on the aisle</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aisle?</span>  <span class="token number">1</span><span class="token punctuation">)</span> true<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aisle?</span> <span class="token number">16</span><span class="token punctuation">)</span> false<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aisle?</span> <span class="token number">32</span><span class="token punctuation">)</span> true<span class="token punctuation">)</span>

<span class="token comment">;; (define (aisle? sn) false) ; stub</span>

<span class="token comment">;; &lt;use template from SeatNum&gt;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">aisle?</span> sn<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">or</span> <span class="token punctuation">(</span><span class="token operator">=</span> sn <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">=</span> sn <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Создавая функцию, которая оперирует с <a href="#interval">созданным ранее типом данных</a> мы полагаемся на этот тип. То есть писать тест для номера кресла 33 нет смысла, тип данных определен только на промежутке от 1 до 32:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">aisle?</span> <span class="token number">33</span><span class="token punctuation">)</span> false<span class="token punctuation">)</span> <span class="token comment">; бессмысленный тест</span>
                                 <span class="token comment">; 33 не является SeatNum</span>
</code></pre></div><h2 id="htdf-with-enumeration"><a href="#htdf-with-enumeration" aria-hidden="true" class="header-anchor">#</a> HtDF with Enumeration</h2> <p>Для функции, которая работает с типом данных Enumeration <a href="https://courses.edx.org/courses/course-v1:UBCx+HtC1x+2T2017/77860a93562d40bda45e452ea064998b/#Enumeration" target="_blank" rel="noopener noreferrer">тесты<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> нужны для всех возможных значений.</p> <p>Пример: функция <code>bump-up</code> возвращает следующую высшую оценку (A — самая высокая):</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; LetterGrade -&gt; LetterGrade</span>
<span class="token comment">;; produces next highest letter grade (no change for A)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">bump-up</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">bump-up</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">bump-up</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>

<span class="token comment">;; (define (bump-up lg) &quot;A&quot;)   ; stub</span>
<span class="token comment">;; &lt;use template from LetterGrade&gt;</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">bump-up</span> lg<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;A&quot;</span>]
        [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;A&quot;</span>]
        [<span class="token punctuation">(</span><span class="token function">string=?</span> lg <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;B&quot;</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Так как шаблон (template) мы используем из <a href="#enumeration">определения типа данных</a>, нужно следить за его валидностью, чтобы там все было без ошибок. Иначе для каждой функции из типа данных будем копировать кривой шаблон.</p> <h2 id="htdf-with-itemization"><a href="#htdf-with-itemization" aria-hidden="true" class="header-anchor">#</a> HtDF with Itemization</h2> <p>Показать картинку текущего состояния в <a href="#itemization">отсчете</a> до нового года:</p> <div class="language-scheme extra-class"><pre class="language-scheme"><code><span class="token comment">;; Countdown-&gt;Image</span>
<span class="token comment">;; produce image of current state of countdown</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">countdown-&gt;image</span> false<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">square</span> <span class="token number">0</span> <span class="token string">&quot;solid&quot;</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">countdown-&gt;image</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">text</span> <span class="token punctuation">(</span><span class="token function">number-&gt;string</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">24</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">check-expect</span> <span class="token punctuation">(</span><span class="token function">countdown-&gt;image</span> <span class="token string">&quot;complete&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">text</span> <span class="token string">&quot;Happy New Year!&quot;</span> <span class="token number">24</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; (define (countdown-&gt;image c) (square 0 &quot;solid&quot; &quot;white&quot;)) ; stub</span>
<span class="token comment">; &lt;use template from Countdown&gt;</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">countdown-&gt;image</span> c<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> [<span class="token punctuation">(</span><span class="token function">false?</span> c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">square</span> <span class="token number">0</span> <span class="token string">&quot;solid&quot;</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span>]
        [<span class="token punctuation">(</span><span class="token function">and</span> <span class="token punctuation">(</span><span class="token builtin">number?</span> c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&lt;=</span> <span class="token number">1</span> c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&lt;=</span> c <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token punctuation">(</span><span class="token function">text</span> <span class="token punctuation">(</span><span class="token function">number-&gt;string</span> c<span class="token punctuation">)</span> <span class="token number">24</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span>]
        [else <span class="token punctuation">(</span><span class="token function">text</span> <span class="token string">&quot;Happy New Year!&quot;</span> <span class="token number">24</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>]<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Тесты нужны для каждого кейса.</p> <p>Функции, конвертирующие данные из одного формата в другой в Racket принято разделять стрелками: <code>number-&gt;string</code>, <code>countdown-&gt;image</code> etc.</p> <h2 id="structure-of-information-flows-through"><a href="#structure-of-information-flows-through" aria-hidden="true" class="header-anchor">#</a> Structure of Information Flows Through</h2> <blockquote><p>Identifying the structure of the information is really a key step in the program design.</p></blockquote> <p>Во многих случаях, для многих программ информация определяет данные, а данные определяют функции (шаблон, тесты). Data Driven Approach.</p> <p>Ещё примеры типов:</p> <ul><li>Группа крови — Enumeration.</li> <li>Количество девочек в группе численностью 50 человек — Interval.</li> <li>Сериал, который или закрыт или идет по какому-то каналу — Itemization.</li> <li>Название универа в Канаде — Simple Atomic.</li> <li>Скорость автомобиля до 200 км/ч — Interval.</li> <li>Континенты — Enumeration.</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/mooc_htdp/1b_htdf/" class="prev">
          1b: How to Design Functions
        </a></span> <span class="next"><a href="/mooc_htdp/3_htdw/">
          3a: How to Design Worlds
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/mooc_htdp/assets/js/app.592f2e84.js" defer></script><script src="/mooc_htdp/assets/js/2.c3a79ebd.js" defer></script>
  </body>
</html>
